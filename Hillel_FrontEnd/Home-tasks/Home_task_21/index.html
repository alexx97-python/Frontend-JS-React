<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home-task-21</title>
<style>
body{
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    width: 100%;
    border: 3px solid pink;
    margin: 0;
    box-sizing: border-box;
    }

#block{
    width: 100px;
    height: 100px;
    border: 3px solid black;
    position: relative;
    }

#boom {
    display: none;
}
</style>
</head>
<body>
    
    <div id="block">
        <p id='boom'>BOOM!</p>
    </div>

<script>
    //Const of elements
    const block = document.body.querySelector('#block');
    const boom = document.body.querySelector('#boom');
    const step = 100; 

    // Event Listeners
    document.addEventListener('keydown', moveBlock);

    function moveBlock (e) {
        const key = e.keyCode;
        BlockEventHandler[key](e);
    }

    const BlockEventHandler = {
        37: function onLeftHandler(e){
            const width = e.view.innerWidth;
            let left = block.style.left === '' ? 0 : parseInt(block.style.left);
            let nextStep = block.offsetLeft - step;
            if (nextStep < 0){
                document.removeEventListener('keydown', moveBlock);
                block.style.left = `${left - block.offsetLeft}px`;
                setTimeout(()=> {
                    console.log(block.offsetLeft)
                    block.style.left = `${block.offsetLeft - step*2}px`;
                    console.log(block.offsetLeft)
                    document.addEventListener('keydown', moveBlock);
                }, 2000);

            }else {
                block.style.left = `${left - step}px`;
            }
            
            console.log(block.offsetLeft)
            
        },
        38: function onUpHandler(e){
            const height = e.view.innerHeight;
            let top = block.style.top === '' ? 0 : parseInt(block.style.top);
            block.style.top = `${top - step}px`;
            console.log('Up')
        },
        39: function onRightHandler(e){
            console.log(e)
            console.log(block.offsetRight)
            const width = e.view.innerWidth;
            let left = block.style.left === '' ? 0 : parseInt(block.style.left);
            let nextStep = block.offsetLeft + block.offsetWidth + step ;
            if (nextStep > width){
                document.removeEventListener('keydown', moveBlock);
                block.style.right = 0
                //block.style.left += `${width - block.offsetLeft - block.offsetWidth}px`;
                setTimeout(()=> {
                    console.log(block.offsetLeft)
                    block.style.left = `${block.offsetLeft + step*2}px`;
                    console.log(block.offsetLeft)
                    document.addEventListener('keydown', moveBlock);
                }, 2000);

            }else {
                block.style.left = `${left + step}px`;
            }
        },

        40: function onDownHandler(e){
            const height = e.view.innerHeight;
            console.log(block.style)
            let top = block.style.top === '' ? 0 : parseInt(block.style.top);
            block.style.top = `${top + step}px`;
            console.log('Down')
        }
    }



</script>
</body>
</html>